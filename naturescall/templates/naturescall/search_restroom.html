{% extends "naturescall/base.html" %}

{% block content %}
<div class="container-fluid">
	<div class= "row">
		<div class="col-auto">
			<button class="btn btn-primary mt-3 mb-3" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Filters</button>
			<div class="collapse mb-3" id="collapseExample">
				<div class="card card-body">
					<form class="form-inline my-2 my-lg-0" method="GET">
						{% csrf_token %}
						{{tableFilter.form.as_p}}
						<button href="{% url 'naturescall:search_restroom'%}" class="btn btn-outline-success my-2 my-sm-0 ml-auto" type="submit">Search</button>
					</form>
				</div>
			</div>
			{% if data %}
			{% for d in data%}
			<div class="card mt-3 mb-3 border-0" style="width: 30rem;">
				<img class="card-img-top" src={{d.image_url}} alt="Card image cap" style= "width:100%; height:15vw; object-fit: cover;">
				<div class="card-body">
					<h5 class="card-title">{{d.name}}</h5>
					<p class="card-text">{{d.addr}}</p>
					<p class="card-text" style="color:DodgerBlue;">{{d.distance}} meters away</p>
					{% if d.db_id %}
					<a href="{% url 'naturescall:restroom_detail' d.db_id %}" class="btn btn-success">Show Details</a>
					{% else %}
					<a href="{% url 'naturescall:add_restroom' d.id %}" class="btn btn-info">Add Restroom</a>
					{% endif %}
				</div>
			</div>
			{% endfor %}
			{% else %}
			<h3>Location Not Found</h3>
			{% endif %}
		</div>
		<div class="col-xl" style="background-image: url('{{map}}'); background-repeat: no-repeat; background-attachment: fixed; background-size: contain; background-position: right;">
			{% load static %}
			<img src="{% static 'naturescall/legend2.jpg' %}" class="legend float-right">
		</div>
	</div>
</div>

{% endblock %}